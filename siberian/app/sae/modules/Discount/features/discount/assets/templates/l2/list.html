<ion-view sb-page-background
          class="module-discount discount-list discount-l2 discount-l2-list">

    <ion-nav-title>{{ page_title }}</ion-nav-title>

    <ion-nav-buttons side="secondary">
        <button ng-click="refresh()"
                class="button button-clear header-item">
            <i class="icon ion-sb-refresh"></i>
        </button>
    </ion-nav-buttons>

    <ion-content>

        <div class="loader"
             ng-show="is_loading">
            <ion-spinner class="spinner-custom"></ion-spinner>
        </div>

        <div class="list"
             ng-show="collection.length">

            <div class="item item-custom"
                 ng-click="showItem(item)"
                 ng-repeat="item in collection">
                <div class="item-image">
                    <img ng-src="{{ item.picture }}"
                         ng-if="item.picture" />
                </div>
                <br/>
                <h2>{{ item.title ? item.title : item.author }}</h2>
                <p ng-if="item.subtitle && !item.subtitle_html"
                   ng-bind-html="item.subtitle | trusted_html"></p>
                <p ng-if="item.subtitle_html"
                   ng-bind-html="item.subtitle_html | trusted_html"></p>
                <p ng-if="!item.subtitle && item.message">{{ item.message }}</p>
            </div>
        </div>

        <div class="list"
             ng-if="!is_loading && !collection.length">
            <div class="item text-center item-custom">
                {{ "No items found" | translate }}
            </div>
        </div>

        <ion-infinite-scroll ng-if="can_load_older_posts"
                             on-infinite="loadMore()"
                             immediate-check="false"
                             distance="10%"
                             class="spinner-custom">
        </ion-infinite-scroll>
    </ion-content>
</ion-view>